<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì…ì„ ì˜·ì´ ì—†ë‹¤ê³ ? : íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ ì„¤ë¬¸ì¡°ì‚¬</title>
    <!-- Tailwind CSS CDN: ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ë§ì„ ìœ„í•´ í•„ìˆ˜ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style id="jsbin-css">
        /* ì„¤ë¬¸ í˜ì´ì§€ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Inter', Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f0fdf4; /* ë°°ê²½ìƒ‰ */
        }
        .background-gradient {
            min-height: 100vh;
            background: linear-gradient(135deg, #a8e063, #56ab2f, #2a8192); /* ì—°ë‘ìƒ‰-ì²­ë¡ìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
            padding: 20px 0;
        }
        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            border-bottom: 2px solid #5cb85c;
            padding-bottom: 10px;
        }
        fieldset {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
        }
        legend {
            font-size: 1.1em;
            font-weight: bold;
            color: #0d8349; 
            padding: 0 10px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        #submitBtn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #submitBtn:hover {
            background-color: #45a049;
        }
        
        /* Modal Style (íŒì—…) */
        .modal {
            display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .modal-content h3 {
            color: #28a745;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
    </style>
</head>
<body>
    <div class="background-gradient">
        <div class="container">
            <!-- 1. ì„¤ë¬¸ ì„¹ì…˜ (ID: surveySection) - ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆ¨ê¸°ë ¤ëŠ” ì˜ì—­ -->
            <div id="surveySection"> 
                <h1>ì…ì„ ì˜·ì´ ì—†ë‹¤ê³ ? : íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ ì„¤ë¬¸ì¡°ì‚¬</h1>
                <form id="surveyForm">
                    <!-- ì„¤ë¬¸ í•­ëª© 1~5 (ìƒëµëœ ë‚´ìš©) -->
                    <fieldset>
                        <legend>1. ì˜·ì„ ì–¼ë§ˆë‚˜ êµ¬ë§¤í•˜ì‹œë‚˜ìš”?</legend>
                        <label><input type="radio" name="q1" value="ì¼ì£¼ì¼" required> ì¼ì£¼ì¼</label><br>
                        <label><input type="radio" name="q1" value="í•œë‹¬"> í•œë‹¬</label><br>
                        <label><input type="radio" name="q1" value="3ê°œì›”"> 3ê°œì›”</label><br>
                        <label><input type="radio" name="q1" value="6ê°œì›”"> 6ê°œì›”</label><br>
                        <label><input type="radio" name="q1" value="1ë…„ í˜¹ì€ ê·¸ ì´ìƒ"> 1ë…„ í˜¹ì€ ê·¸ ì´ìƒ</label>
                    </fieldset>

                    <fieldset>
                        <legend>2. í•œ ë²ˆ êµ¬ë§¤ì‹œ ëª‡ ë²Œì„ êµ¬ë§¤í•˜ì‹œë‚˜ìš”?</legend>
                        <label><input type="radio" name="q2" value="1ë²Œ" required> 1ë²Œ</label><br>
                        <label><input type="radio" name="q2" value="2~3ë²Œ"> 2~3ë²Œ</label><br>
                        <label><input type="radio" name="q2" value="4~5ë²Œ"> 4~5ë²Œ</label><br>
                        <label><input type="radio" name="q2" value="6ë²Œ ì´ìƒ"> 6ë²Œ ì´ìƒ</label>
                    </fieldset>

                    <fieldset>
                        <legend>3. ì£¼ë¡œ ì–´ë””ì„œ êµ¬ë§¤í•˜ì‹œë‚˜ìš”?</legend>
                        <label><input type="radio" name="q3" value="ì˜¨ë¼ì¸ ì‡¼í•‘ëª°" required> ì˜¨ë¼ì¸ ì‡¼í•‘ëª°</label><br>
                        <label><input type="radio" name="q3" value="ë¸Œëœë“œ ë§¤ì¥"> ë¸Œëœë“œ ë§¤ì¥</label><br>
                        <label><input type="radio" name="q3" value="ì˜¤í”„ë¼ì¸ í¸ì§‘ìƒµ, ë³´ì„¸"> ì˜¤í”„ë¼ì¸ í¸ì§‘ìƒµ, ë³´ì„¸</label><br>
                        <label><input type="radio" name="q3" value="ì¤‘ê³  ê±°ë˜(ì˜¨/ì˜¤í”„ë¼ì¸)"> ì¤‘ê³  ê±°ë˜(ì˜¨/ì˜¤í”„ë¼ì¸)</label><br>
                        <label><input type="radio" name="q3" value="ê¸°íƒ€"> ê¸°íƒ€</label>
                    </fieldset>

                    <fieldset>
                        <legend>4. êµ¬ë§¤í•œ ì˜·ì€ ì–¼ë§ˆë‚˜ ì˜¤ë˜ ì…ë‚˜ìš”?</legend>
                        <label><input type="radio" name="q4" value="1ë…„ ë¯¸ë§Œ" required> 1ë…„ ë¯¸ë§Œ</label><br>
                        <label><input type="radio" name="q4" value="2~3ë…„"> 2~3ë…„</label><br>
                        <label><input type="radio" name="q4" value="5ë…„ ì´ìƒ"> 5ë…„ ì´ìƒ</label><br>
                        <label><input type="radio" name="q4" value="ë§ê°€ì§€ì§€ ì•ŠëŠ”í•œ ë²„ë¦¬ì§€ ì•ŠëŠ”ë‹¤"> ë§ê°€ì§€ì§€ ì•ŠëŠ”í•œ ë²„ë¦¬ì§€ ì•ŠëŠ”ë‹¤</label>
                    </fieldset>

                    <fieldset>
                        <legend>5. íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ì— ëŒ€í•´ ì–´ëŠì •ë„ ì•Œê³ ê³„ì‹œë‚˜ìš”?</legend>
                        <label><input type="radio" name="q5" value="ì˜ ì•Œê³  ìˆë‹¤" required> ì˜ ì•Œê³  ìˆë‹¤</label><br>
                        <label><input type="radio" name="q5" value="ì–´ëŠì •ë„ ì•Œê³  ìˆë‹¤"> ì–´ëŠì •ë„ ì•Œê³  ìˆë‹¤</label><br>
                        <label><input type="radio" name="q5" value="ì¡°ê¸ˆ ì•Œê³  ìˆë‹¤"> ì¡°ê¸ˆ ì•Œê³  ìˆë‹¤</label><br>
                        <label><input type="radio" name="q5" value="ì˜ ëª¨ë¥¸ë‹¤"> ì˜ ëª¨ë¥¸ë‹¤</label>
                    </fieldset>

                    <button type="submit" id="submitBtn">ì œì¶œí•˜ê¸°</button>
                </form>
            </div> 

            <!-- 2. ê²°ê³¼ ì„¹ì…˜ (ID: resultSection) - ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì°¨íŠ¸ ë° ì •ë³´ë¥¼ ë¡œë“œí•  ë¹ˆ ì˜ì—­, ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ -->
            <!-- ì´ ì„¹ì…˜ ì•ˆì— ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼, ì°¨íŠ¸ ì˜ì—­, ì •ë³´ ì˜ì—­ì´ ì‚½ì…ë©ë‹ˆë‹¤. -->
            <div id="resultSection" style="display: none;">
            </div>

        </div>
    </div>
    
    <!-- 3. ì œì¶œ ì™„ë£Œ ëª¨ë‹¬ (ID: submissionModal) - ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ë³´ì—¬ì¤„ íŒì—… ì°½ -->
    <div id="submissionModal" class="modal">
        <div class="modal-content">
            <h3>âœ… ì„¤ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
            <p>ì‹¤ì‹œê°„ìœ¼ë¡œ ì§‘ê³„ëœ ë‹¤ë¥¸ ì°¸ì—¬ìë“¤ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <!-- íŒì—… ë‚´ ë²„íŠ¼ (ID: closeModalBtn) - í´ë¦­ ì‹œ ê²°ê³¼ í˜ì´ì§€ë¡œ ì „í™˜ -->
            <button id="closeModalBtn" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-4">
                ê²°ê³¼ ë³´ê¸°
            </button>
        </div>
    </div>
    
<script id="jsbin-javascript">
// ğŸš¨ [í•„ìˆ˜ êµì²´] 1. Google Apps Script ë°°í¬ ì‹œ ì–»ì€ Web App URLë¡œ êµì²´í•˜ì„¸ìš”.
const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxNHw3sRbzuOTtDL7jFxmPaOGVLtn9WaR792DryyyJTJ7FxsRF4iw3WwWS_B8sgQB5V/exec'; 

// ğŸš¨ [í•„ìˆ˜ êµì²´] 2. Google Sheetsì—ì„œ ì°¨íŠ¸ ê²Œì‹œ í›„ ì–»ì€ iframe src ì†ì„± ê°’ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”. (ì´ 5ê°œ)
// ì•„ë˜ URLì€ ì˜ˆì‹œì…ë‹ˆë‹¤. ê° ì§ˆë¬¸ë³„ë¡œ 'ì›¹ì— ê²Œì‹œ' ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ OIDë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.
const CHART_EMBED_URL_Q1 = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRuD1zwZn-7ezRlEQdw_UHa1wlMeuGi6-IjQOhEmGVbZMFulx1dnWAmdnJ26b2xRSG5MS1LDKL25Q0R/pubchart?oid=2096894684&amp;format=interactive'; 
const CHART_EMBED_URL_Q2 = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRuD1zwZn-7ezRlEQdw_UHa1wlMeuGi6-IjQOhEmGVbZMFulx1dnWAmdnJ26b2xRSG5MS1LDKL25Q0R/pubchart?oid=1562599177&amp;format=interactive'; // OIDë¥¼ ì‹¤ì œ Q2 ì°¨íŠ¸ OIDë¡œ êµì²´í•´ì•¼ í•¨
const CHART_EMBED_URL_Q3 = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRuD1zwZn-7ezRlEQdw_UHa1wlMeuGi6-IjQOhEmGVbZMFulx1dnWAmdnJ26b2xRSG5MS1LDKL25Q0R/pubchart?oid=1302991120&amp;format=interactive'; // OIDë¥¼ ì‹¤ì œ Q3 ì°¨íŠ¸ OIDë¡œ êµì²´í•´ì•¼ í•¨
const CHART_EMBED_URL_Q4 = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRuD1zwZn-7ezRlEQdw_UHa1wlMeuGi6-IjQOhEmGVbZMFulx1dnWAmdnJ26b2xRSG5MS1LDKL25Q0R/pubchart?oid=479222045&amp;format=interactive'; // OIDë¥¼ ì‹¤ì œ Q4 ì°¨íŠ¸ OIDë¡œ êµì²´í•´ì•¼ í•¨
const CHART_EMBED_URL_Q5 = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRuD1zwZn-7ezRlEQdw_UHa1wlMeuGi6-IjQOhEmGVbZMFulx1dnWAmdnJ26b2xRSG5MS1LDKL25Q0R/pubchart?oid=1669632818&amp;format=interactive'; // OIDë¥¼ ì‹¤ì œ Q5 ì°¨íŠ¸ OIDë¡œ êµì²´í•´ì•¼ í•¨
    
// í˜„ì¬ ë³´ê³  ìˆëŠ” ê²°ê³¼ í˜ì´ì§€ ë·° ìƒíƒœ ('charts' ë˜ëŠ” 'info')
let currentView = 'charts';

// í¼ ì œì¶œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
document.getElementById('surveyForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // í¼ ìœ íš¨ì„± ê²€ì‚¬
    if (!this.checkValidity()) {
        return; 
    }

    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = true;
    submitBtn.textContent = 'ì œì¶œ ì¤‘...';
    
    const formData = new FormData(this);
    
    // ì „ì†¡í•  ë°ì´í„° ê°ì²´ êµ¬ì„±
    const payload = {
        q1: formData.get('q1'),
        q2: formData.get('q2'),
        q3: formData.get('q3'),
        q4: formData.get('q4'),
        q5: formData.get('q5')
    };
    
    console.log('[DEBUG] Payload to be sent:', payload);

    // Google Apps Script Web Appìœ¼ë¡œ ë°ì´í„° ì „ì†¡
    fetch(GOOGLE_APPS_SCRIPT_URL, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded' 
        },
        body: new URLSearchParams(payload) // URL ì¸ì½”ë”©ëœ í˜•íƒœë¡œ ì „ì†¡
    })
    .then(response => {
        console.log('Submission successful, status:', response.status, 'type:', response.type);
        console.log('If data is not saving, check Google Apps Script "Executions" logs.');

        // ì„±ê³µì ì¸ ì „ì†¡ í›„ íŒì—… í‘œì‹œ (ID: submissionModal ì‚¬ìš©)
        document.getElementById('submissionModal').style.display = 'flex';
        
        // íŒì—…ì˜ 'ê²°ê³¼ ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì‹œ ê²°ê³¼ í˜ì´ì§€ë¡œ ì „í™˜ (ID: closeModalBtn ì‚¬ìš©)
        document.getElementById('closeModalBtn').onclick = () => {
            document.getElementById('submissionModal').style.display = 'none';
            showResultPage();
        };

        // ë²„íŠ¼ ìƒíƒœ ë³µêµ¬
        submitBtn.disabled = false;
        submitBtn.textContent = 'ì œì¶œí•˜ê¸°';
    })
    .catch(error => {
        // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬
        console.error('Network Error:', error);
        
        submitBtn.disabled = false;
        submitBtn.textContent = 'ì œì¶œí•˜ê¸°';
    });
});

/**
 * ì°¨íŠ¸ iframe HTML êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
 */
function generateChartHtml(chartUrl, title) {
    return `
        <div class="mt-8 pt-4 border-t border-gray-200">
            <h3 class="text-xl font-semibold text-gray-800 mb-4 text-center">${title}</h3>
            <div class="chart-area mb-8 shadow-lg rounded-lg overflow-hidden border border-gray-300">
                <iframe 
                    src="${chartUrl}"
                    width="100%" 
                    height="450" 
                    frameborder="0" 
                    loading="lazy"
                    allowfullscreen>
                </iframe>
            </div>
        </div>
    `;
}

/**
 * ê²°ê³¼ í˜ì´ì§€ì˜ ë ˆì´ì•„ì›ƒ(ë„¤ë¹„ê²Œì´ì…˜, ì°¨íŠ¸, ì •ë³´)ì„ ì´ˆê¸° ì„¤ì •í•©ë‹ˆë‹¤. (ë”± í•œ ë²ˆë§Œ ì‹¤í–‰)
 */
function initializeResultLayout(resultSection) {
    // 1. Navigation Setup
    const navigationHtml = `
        <div id="resultNavigation" class="mb-8 flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 bg-gray-100 rounded-lg shadow-inner">
            <button id="navToCharts" class="nav-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200">
                ğŸ“Š ì°¨íŠ¸ ê²°ê³¼ ë³´ê¸°
            </button>
            <button id="navToInfo" class="nav-button bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition duration-200">
                ğŸ“œ íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ ì •ë³´
            </button>
        </div>
    `;

    // 2. Chart Section Setup
    const chartHtml = `
        <div id="chartResults">
            <h2 class="text-3xl font-extrabold text-blue-800 text-center mb-6 pt-4">ğŸ“Š ì„¤ë¬¸ì¡°ì‚¬ ì‹¤ì‹œê°„ ê²°ê³¼</h2>
            <p class="text-lg text-gray-700 text-center mb-8">
                Google Sheetsì— ìˆ˜ì§‘ëœ ì„¤ë¬¸ì¡°ì‚¬ ê²°ê³¼ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ê·¸ë˜í”„ì…ë‹ˆë‹¤.
            </p>
            
            <!-- 5ê°œì˜ ì°¨íŠ¸ ì„¹ì…˜ -->
            ${generateChartHtml(CHART_EMBED_URL_Q1, "1. ì˜·ì„ ì–¼ë§ˆë‚˜ êµ¬ë§¤í•˜ì‹œë‚˜ìš”? (êµ¬ë§¤ ë¹ˆë„)")}
            ${generateChartHtml(CHART_EMBED_URL_Q2, "2. í•œ ë²ˆ êµ¬ë§¤ ì‹œ ëª‡ ë²Œì„ êµ¬ë§¤í•˜ì‹œë‚˜ìš”? (êµ¬ë§¤ ìˆ˜ëŸ‰)")}
            ${generateChartHtml(CHART_EMBED_URL_Q3, "3. ì£¼ë¡œ ì–´ë””ì„œ êµ¬ë§¤í•˜ì‹œë‚˜ìš”? (ì£¼ìš” êµ¬ë§¤ì²˜)")}
            ${generateChartHtml(CHART_EMBED_URL_Q4, "4. êµ¬ë§¤í•œ ì˜·ì€ ì–¼ë§ˆë‚˜ ì˜¤ë˜ ì…ë‚˜ìš”? (ì˜· ìˆ˜ëª…)")}
            ${generateChartHtml(CHART_EMBED_URL_Q5, "5. íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ì— ëŒ€í•´ ì–´ëŠì •ë„ ì•Œê³ ê³„ì‹œë‚˜ìš”? (ì¸ì‹ ìˆ˜ì¤€)")}
            
            <p class="text-sm text-center text-gray-500 mt-2">ì°¨íŠ¸ëŠ” Google Sheetsì˜ ë°ì´í„° ì—…ë°ì´íŠ¸ ì£¼ê¸°ì— ë”°ë¼ ë°˜ì˜ë©ë‹ˆë‹¤.</p>
        </div>
    `;

    // 3. Info Section Setup (Enhanced Content)
    const infoHtml = `
        <div id="infoDetails" style="display: none;">
            <h2 class="text-3xl font-bold text-green-700 text-center mb-6 pt-4">ğŸ“œ íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜: ì§€ì† ê°€ëŠ¥ì„±ì˜ ê·¸ë¦¼ì</h2>
            <div class="space-y-6 text-gray-800 p-4 border rounded-lg bg-green-50">
                
                <h3 class="text-xl font-semibold text-green-600">1. í™˜ê²½ ì˜¤ì—¼ ë¬¸ì œ</h3>
                <p>
                    íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ì€ ì—„ì²­ë‚œ ì–‘ì˜ ìì›ì„ ì†Œëª¨í•©ë‹ˆë‹¤. íŠ¹íˆ ì €ë ´í•œ í•©ì„± ì„¬ìœ ì¸ í´ë¦¬ì—ìŠ¤í„°ëŠ” ì œì¡° ê³¼ì •ì—ì„œ ì„ìœ ë¥¼ ì‚¬ìš©í•˜ë©°, ì„¸íƒ ì‹œ ë¯¸ì„¸ í”Œë¼ìŠ¤í‹±ì„ ë°°ì¶œí•˜ì—¬ í•´ì–‘ ìƒíƒœê³„ì— ì¹˜ëª…ì ì¸ ì˜í–¥ì„ ì¤ë‹ˆë‹¤. ë˜í•œ ë©´í™” ìƒì‚°ì—ëŠ” ë§‰ëŒ€í•œ ì–‘ì˜ ë¬¼ê³¼ ì‚´ì¶©ì œê°€ í•„ìš”í•˜ë©°, ì§§ì€ ì£¼ê¸°ë¡œ ë²„ë ¤ì§€ëŠ” ì˜·ë“¤ì€ ë§¤ë¦½ì§€ì—ì„œ ë¶„í•´ë˜ì§€ ì•Šê³  í™˜ê²½ì— ì¥ê¸°ì ì¸ ë¶€ë‹´ì„ ì¤ë‹ˆë‹¤.
                </p>
                
                <h3 class="text-xl font-semibold text-green-600">2. ë…¸ë™ ì°©ì·¨ ë…¼ë€</h3>
                <p>
                    ì˜·ì„ ì €ë ´í•˜ê²Œ, ê·¸ë¦¬ê³  ë¹ ë¥´ê²Œ ìƒì‚°í•˜ê¸° ìœ„í•´ ê°œë°œë„ìƒêµ­ì˜ ë…¸ë™ìë“¤ì€ ë¹„ì¸ê°„ì ì¸ í™˜ê²½ì—ì„œ ì¼í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë‚®ì€ ì„ê¸ˆ, ì¥ì‹œê°„ ë…¸ë™, ê·¸ë¦¬ê³  ì—´ì•…í•˜ê³  ìœ„í—˜í•œ ì‘ì—… í™˜ê²½ì€ íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ì˜ ê·¸ë¦¼ìì…ë‹ˆë‹¤. ìœ¤ë¦¬ì  ì†Œë¹„ê°€ ê°•ì¡°ë˜ëŠ” ì‹œëŒ€ì—, ì†Œë¹„ìë“¤ì€ ìì‹ ì´ ì…ëŠ” ì˜·ì´ ì–´ë–¤ ê³¼ì •ì„ ê±°ì³ì™”ëŠ”ì§€ ì£¼ëª©í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
                </p>
                
                <h3 class="text-xl font-semibold text-green-600">3. ê³¼ì‰ ì†Œë¹„ ë¬¸í™” ì¡°ì¥</h3>
                <p>
                    íŒ¨ìŠ¤íŠ¸ íŒ¨ì…˜ì€ 'ì…ì„ ì˜·ì´ ì—†ë‹¤'ëŠ” ì¸ì‹ì„ ì¡°ì¥í•˜ë©°, ëŠì„ì—†ì´ ìƒˆë¡œìš´ ìœ í–‰ì„ ë§Œë“¤ì–´ ì†Œë¹„ìê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì˜·ì„ êµ¬ë§¤í•˜ë„ë¡ ìœ ë„í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì˜·ì„ ì‰½ê²Œ ë²„ë¦¬ëŠ” ìŠµê´€ì´ ìƒê¸°ê³ , ê°œì¸ì˜ ì˜·ì¥ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬íšŒ ì „ì²´ì˜ ì§€ì† ê°€ëŠ¥ì„±ì— ì•…ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ì˜·ì˜ ê°€ì¹˜ë¥¼ ì¡´ì¤‘í•˜ê³  ì˜¤ë˜ ì…ëŠ” 'ìŠ¬ë¡œìš° íŒ¨ì…˜'ìœ¼ë¡œì˜ ì „í™˜ì´ ì¤‘ìš”í•´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
            <p class="text-sm text-center text-gray-500 mt-8">ìì„¸í•œ ì •ë³´ëŠ” ê´€ë ¨ í™˜ê²½ ë° ë…¸ë™ ë‹¨ì²´ ìë£Œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p>
        </div>
    `;

    resultSection.innerHTML = navigationHtml + chartHtml + infoHtml;

    // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
    document.getElementById('navToCharts').addEventListener('click', () => updateResultView('charts'));
    document.getElementById('navToInfo').addEventListener('click', () => updateResultView('info'));
}


/**
 * í˜„ì¬ ë·° ìƒíƒœì— ë”°ë¼ í™”ë©´ì„ ì „í™˜í•˜ê³  ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
 */
function updateResultView(view) {
    currentView = view;
    const chartDiv = document.getElementById('chartResults');
    const infoDiv = document.getElementById('infoDetails');
    const navChartsBtn = document.getElementById('navToCharts');
    const navInfoBtn = document.getElementById('navToInfo');
    
    // ì´ ì‹œì ì—ì„œ ìš”ì†Œê°€ ì¡´ì¬í•œë‹¤ê³  ê°€ì • (initializeResultLayoutì´ í˜¸ì¶œëœ í›„)

    if (view === 'charts') {
        chartDiv.style.display = 'block';
        infoDiv.style.display = 'none';
        
        // ì°¨íŠ¸ ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼
        navChartsBtn.classList.remove('bg-gray-400', 'hover:bg-gray-500');
        navChartsBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
        // ì •ë³´ ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼
        navInfoBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        navInfoBtn.classList.add('bg-gray-400', 'hover:bg-gray-500');
    } else { // view === 'info'
        chartDiv.style.display = 'none';
        infoDiv.style.display = 'block';

        // ì°¨íŠ¸ ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼
        navChartsBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        navChartsBtn.classList.add('bg-gray-400', 'hover:bg-gray-500');
        // ì •ë³´ ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼
        navInfoBtn.classList.remove('bg-gray-400', 'hover:bg-gray-500');
        navInfoBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
    }
    window.scrollTo(0, 0); 
}

/**
 * ì„¤ë¬¸ì¡°ì‚¬ ê²°ê³¼ í˜ì´ì§€ë¡œ í™”ë©´ì„ ì „í™˜í•˜ê³  Google Sheetsì˜ ì°¨íŠ¸ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
 */
function showResultPage() {
    // ì„¤ë¬¸ ì„¹ì…˜ ìˆ¨ê¸°ê¸° (ID: surveySection ì‚¬ìš©)
    document.getElementById('surveySection').style.display = 'none';
    
    const resultSection = document.getElementById('resultSection');
    
    // ê²°ê³¼ ì„¹ì…˜ ë‚´ìš©ì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì´ˆê¸° ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•©ë‹ˆë‹¤.
    if (resultSection.children.length === 0) {
        initializeResultLayout(resultSection);
    }
    
    // ê²°ê³¼ ì„¹ì…˜ ë³´ì´ê¸°
    resultSection.style.display = 'block';

    // í˜„ì¬ ë·° ìƒíƒœì— ë”°ë¼ í™”ë©´ì„ ì—…ë°ì´íŠ¸ (ê¸°ë³¸ê°’: 'charts')
    updateResultView(currentView);
}
</script>
</body>
</html>
